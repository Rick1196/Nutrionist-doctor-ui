(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"305l":function(e,r,n){"use strict";n.r(r),n.d(r,"AuthModule",(function(){return Q}));var t=n("ofXK"),o=n("3Pt+"),i=n("tyNb"),a=n("fXoL"),s=n("AhZb");function c(e,r){if(1&e&&(a.Tb(0,"div",20),a.Oc(1),a.Sb()),2&e){const e=a.jc();a.Ab(1),a.Qc(" ",e.errorResponse," ")}}function b(e,r){1&e&&(a.Tb(0,"div",21),a.Tb(1,"span",22),a.Oc(2,"Loading..."),a.Sb(),a.Sb())}const d=function(){return["/auth/verify"]},l=function(e){return{username:e}};function u(e,r){if(1&e&&(a.Tb(0,"a",23),a.Oc(1,"Verificar usuario"),a.Sb()),2&e){a.jc();const e=a.Dc(11);a.qc("routerLink",a.tc(2,d))("queryParams",a.uc(3,l,e.value))}}const m=function(){return["/auth/register"]};let g=(()=>{class e{constructor(e,r){this.auth=e,this.router=r,this.loading=!1,this.form=new o.d({user_name:new o.b("",o.p.required),password:new o.b("",o.p.required)})}ngOnInit(){}submit(){this.auth.loginUser(this.form.value).then(e=>{this.router.navigate("doctor"===e.role?["/nutritionist/home"]:["/patient/home"],{queryParams:{username:this.form.controls.user_name.value},queryParamsHandling:"merge"})}).catch(e=>{this.loading=!1,this.errorResponse=e.error.errors?e.error.errors[0].message.username:e.error.error})}sendCode(){this.auth.requestChange(this.form.controls.user_name.value).then(e=>{this.router.navigate(["auth/change-password"],{queryParams:{username:this.form.controls.user_name.value},queryParamsHandling:"merge"})}).catch(e=>{e.error.errors?(console.log("ad"),this.errorResponse=e.error.errors[0].message.message):(console.log("bas"),this.errorResponse=e.error.error)})}}return e.\u0275fac=function(r){return new(r||e)(a.Nb(s.a),a.Nb(i.b))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-login"]],decls:36,vars:9,consts:[[1,"container"],[1,"card"],[1,"card-header"],[1,"text-center"],[1,"card-body",2,"padding","1em"],[3,"formGroup"],[1,"form-group"],["for","usuario"],["type","text","formControlName","user_name","placeholder","Usuario",1,"form-control",3,"ngClass"],["user",""],[1,"invalid-feedback"],["for","password"],["type","password","formControlName","password","placeholder","Contrase\xf1a",1,"form-control",3,"ngClass"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"btn","btn-outline-secondary","btn-block",3,"disabled","click"],["class","spinner-border","role","status",4,"ngIf"],[1,"mt-1","mb-1"],[1,"btn",3,"click"],["routerLinkActive","router-link-active",3,"routerLink"],["queryParamsHandling","merge",3,"routerLink","queryParams",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"sr-only"],["queryParamsHandling","merge",3,"routerLink","queryParams"]],template:function(e,r){if(1&e&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Tb(3,"h4",3),a.Oc(4,"Inicio de sesion"),a.Sb(),a.Sb(),a.Tb(5,"div",4),a.Tb(6,"form",5),a.Tb(7,"div",6),a.Tb(8,"label",7),a.Oc(9,"Usuario"),a.Sb(),a.Ob(10,"input",8,9),a.Tb(12,"div",10),a.Oc(13," El nombre de usuario es una campo "),a.Tb(14,"strong"),a.Oc(15,"requerido"),a.Sb(),a.Sb(),a.Sb(),a.Tb(16,"div",6),a.Tb(17,"label",11),a.Oc(18,"Contrase\xf1a"),a.Sb(),a.Ob(19,"input",12),a.Tb(20,"div",10),a.Oc(21," La contrase\xf1a es una campo "),a.Tb(22,"strong"),a.Oc(23,"requerido"),a.Sb(),a.Sb(),a.Sb(),a.Mc(24,c,2,1,"div",13),a.Tb(25,"button",14),a.fc("click",(function(){return r.loading=!0,r.submit()})),a.Mc(26,b,3,0,"div",15),a.Oc(27," Iniciar sesion "),a.Sb(),a.Tb(28,"div",16),a.Tb(29,"a",17),a.fc("click",(function(){return r.sendCode()})),a.Oc(30,"He olvidado mi password"),a.Sb(),a.Sb(),a.Tb(31,"div",16),a.Tb(32,"a",18),a.Oc(33,"Registrarse"),a.Sb(),a.Sb(),a.Tb(34,"div",16),a.Mc(35,u,2,5,"a",19),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e){const e=a.Dc(11);a.Ab(6),a.qc("formGroup",r.form),a.Ab(4),a.qc("ngClass",r.form.controls.user_name.invalid&&r.form.controls.user_name.touched?"is-invalid":""),a.Ab(9),a.qc("ngClass",r.form.controls.password.invalid&&r.form.controls.password.touched?"is-invalid":""),a.Ab(5),a.qc("ngIf",r.errorResponse),a.Ab(1),a.qc("disabled",0==r.form.valid),a.Ab(1),a.qc("ngIf",1==r.loading),a.Ab(6),a.qc("routerLink",a.tc(8,m)),a.Ab(3),a.qc("ngIf",e.value)}},directives:[o.r,o.k,o.e,o.a,o.j,o.c,t.k,t.m,i.d,i.c],styles:[".card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:90%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);border-radius:2em}.card-header[_ngcontent-%COMP%]{background-color:#4d7e7e;color:#fff;border-radius:2em;margin-bottom:2em}.text-center[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.container[_ngcontent-%COMP%]{padding:2em}.alert[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{border-radius:2em}"]}),e})();var p=n("Gdhr"),f=n("Ii8c"),h=n("GNEJ"),v=n("jhN1");function S(e,r){if(1&e){const e=a.Ub();a.Tb(0,"div",36),a.Tb(1,"input",37),a.fc("change",(function(r){return a.Fc(e),a.jc().onFileChange(r)})),a.Sb(),a.Tb(2,"label",38),a.Oc(3,"Seleccionar imagen"),a.Sb(),a.Tb(4,"div",12),a.Oc(5," Por favor, seleccione una archivo valido "),a.Sb(),a.Sb()}if(2&e){const e=a.jc();a.Ab(1),a.qc("ngClass",1==e.form.controls.image.invalid?"is-invalid":"")}}function T(e,r){if(1&e&&(a.Tb(0,"span"),a.Oc(1),a.Sb()),2&e){const e=a.jc(2);a.Ab(1),a.Pc(e.responseError.user_name)}}function O(e,r){if(1&e&&(a.Tb(0,"div",39),a.Mc(1,T,2,1,"span",20),a.Sb()),2&e){const e=a.jc();a.Ab(1),a.qc("ngIf",e.responseError.user_name)}}function C(e,r){1&e&&(a.Tb(0,"p"),a.Oc(1," La fecha de nacimiento es campo requerido "),a.Sb())}function q(e,r){1&e&&(a.Tb(0,"p"),a.Oc(1," Debe ser mayor de edad para registrarse "),a.Sb())}function w(e,r){if(1&e&&(a.Tb(0,"div"),a.Mc(1,C,2,0,"p",20),a.Mc(2,q,2,0,"p",20),a.Sb()),2&e){const e=a.jc();a.Ab(1),a.qc("ngIf",e.form.controls.birth_date.errors.required),a.Ab(1),a.qc("ngIf",e.form.controls.birth_date.errors.age)}}function P(e,r){if(1&e&&(a.Tb(0,"option",40),a.Oc(1),a.Sb()),2&e){const e=r.$implicit;a.qc("value",e),a.Ab(1),a.Pc(e)}}function _(e,r){if(1&e&&(a.Tb(0,"span"),a.Oc(1),a.Sb()),2&e){const e=a.jc(2);a.Ab(1),a.Pc(e.responseError.phone)}}function y(e,r){if(1&e&&(a.Tb(0,"div",39),a.Mc(1,_,2,1,"span",20),a.Sb()),2&e){const e=a.jc();a.Ab(1),a.qc("ngIf",e.responseError.phone)}}function M(e,r){if(1&e&&(a.Tb(0,"option",40),a.Oc(1),a.Sb()),2&e){const e=r.$implicit;a.qc("value",e),a.Ab(1),a.Pc(e)}}function A(e,r){if(1&e&&(a.Tb(0,"option",40),a.Oc(1),a.Sb()),2&e){const e=r.$implicit;a.qc("value",e),a.Ab(1),a.Pc(e)}}function x(e,r){if(1&e&&(a.Tb(0,"option",40),a.Oc(1),a.Sb()),2&e){const e=r.$implicit;a.qc("value",e),a.Ab(1),a.Pc(e)}}function k(e,r){1&e&&(a.Tb(0,"div",41),a.Tb(1,"span",42),a.Oc(2,"Loading..."),a.Sb(),a.Sb())}function I(e,r){if(1&e&&a.Ob(0,"img",43),2&e){const e=a.jc();a.qc("src",e.imageUrl,a.Hc)}}let N=(()=>{class e{constructor(e,r,n,t){this.cd=e,this.auth=r,this.misc=n,this.sanitizer=t,this.success=new a.n,this.loading=!1,this.genders=["Hombre","Mujer","Otros"],this.data=[],this.countries=[],this.states=[],this.cities=[],this.form=new o.d({first_name:new o.b("",o.p.required),last_name:new o.b("",o.p.required),birth_date:new o.b("",[o.p.required,f.a]),gender:new o.b("",o.p.required),email:new o.b("",[o.p.required,o.p.email]),phone:new o.b("",[o.p.required,o.p.minLength(10),o.p.maxLength(11)]),countrie:new o.b("",o.p.required),state:new o.b("",o.p.required),citie:new o.b("",o.p.required),direction:new o.b("",o.p.required),image:new o.b("",[o.p.required,p.a]),user_name:new o.b("",o.p.required),password:new o.b("",[o.p.required,o.p.minLength(8)]),role:new o.b("doctor")})}ngOnInit(){this.misc.getCountires().then(e=>{this.data=e,this.data.forEach(e=>{for(const r in e)this.countries.push(r)})})}filterStates(e){const r=this.data.findIndex(r=>Object.keys(r)[0]===e);this.states=Object.keys(this.data[r][e])}filterCitie(e){const r=this.data.findIndex(e=>Object.keys(e)[0]===this.form.controls.countrie.value);this.cities=this.data[r][this.form.controls.countrie.value][e]}onFileChange(e){const r=new FileReader;if(e.target.files&&e.target.files.length){const[n]=e.target.files;r.readAsDataURL(n),r.onload=()=>{this.file=r.result,this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.file)}}}submit(){const e=Object.assign({},this.form.value),r=this.file.split(",");e.image=r[1],e.data_type=r[0],this.form.valid&&this.auth.registerNutritionist(e).then(e=>{this.success.emit({success:!0,user_name:this.form.controls.user_name.value}),this.loading=!1}).catch(e=>{this.loading=!1,console.error(e.error.errors),this.responseError=e.error.errors})}}return e.\u0275fac=function(r){return new(r||e)(a.Nb(a.h),a.Nb(s.a),a.Nb(h.a),a.Nb(v.b))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-register-form"]],outputs:{success:"success"},decls:133,vars:24,consts:[[1,"card"],[1,"card-header"],[1,"text-center"],[1,"card-body",2,"padding","1em"],[3,"formGroup"],[1,"grid-container"],[2,"text-align","left","color","grey"],[1,"row",2,"margin-bottom","1em"],[1,"col"],["class","custom-file",4,"ngIf","ngIfElse"],[1,"form-group"],["trim","","type","text","formControlName","user_name","placeholder","Usuario",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["class","errors",4,"ngIf"],["type","password","formControlName","password","placeholder","Contrase\xf1a",1,"form-control",3,"ngClass"],[1,"row"],[1,"col-6"],["type","text","formControlName","first_name","placeholder","Nombre(s)",1,"form-control",3,"ngClass"],["type","text","formControlName","last_name","placeholder","Apellido",1,"form-control",3,"ngClass"],["formControlName","birth_date","type","date","placeholder","Fecha de nacimiento","placement","top",1,"form-control",3,"ngClass"],[4,"ngIf"],["formControlName","gender",1,"custom-select",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["type","tel","formControlName","phone","placeholder","123-123-1234",1,"form-control",3,"ngClass"],["type","email","formControlName","email","placeholder","Correo electronico",1,"form-control",3,"ngClass"],[1,"col-4"],["formControlName","countrie",1,"custom-select",3,"ngClass","change"],["st",""],["formControlName","state",1,"custom-select",3,"ngClass","change"],["ct",""],["formControlName","citie",1,"custom-select",3,"ngClass"],[2,"margin-bottom","1em"],["type","text","formControlName","direction","placeholder","Direccion",1,"form-control",3,"ngClass"],[1,"btn","btn-outline-secondary","btn-block",3,"disabled","click"],["class","spinner-border","role","status",4,"ngIf"],["image",""],[1,"custom-file"],["type","file","id","image","formControlName","image","accept","image/*","placeholder","Imagen representativa",1,"custom-file-input",3,"ngClass","change"],["for","image",1,"custom-file-label"],[1,"errors"],[3,"value"],["role","status",1,"spinner-border"],[1,"sr-only"],["alt","...",1,"img-thumbnail",3,"src"]],template:function(e,r){if(1&e){const e=a.Ub();a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"h4",2),a.Oc(3,"Registro de nutriologo"),a.Sb(),a.Sb(),a.Tb(4,"div",3),a.Tb(5,"form",4),a.Tb(6,"div",5),a.Tb(7,"div",6),a.Tb(8,"h6"),a.Oc(9,"Informacion de inicio de sesion"),a.Sb(),a.Sb(),a.Tb(10,"div",7),a.Tb(11,"div",8),a.Tb(12,"label"),a.Oc(13,"Imagen representativa"),a.Sb(),a.Mc(14,S,6,1,"div",9),a.Sb(),a.Tb(15,"div",8),a.Tb(16,"div",10),a.Tb(17,"label"),a.Oc(18,"Usuario"),a.Sb(),a.Ob(19,"input",11),a.Tb(20,"div",12),a.Oc(21," El nombre de usuario es una campo "),a.Tb(22,"strong"),a.Oc(23,"requerido"),a.Sb(),a.Sb(),a.Mc(24,O,2,1,"div",13),a.Sb(),a.Sb(),a.Tb(25,"div",8),a.Tb(26,"div",10),a.Tb(27,"label"),a.Oc(28,"Contrase\xf1a"),a.Sb(),a.Ob(29,"input",14),a.Tb(30,"div",12),a.Oc(31," Debe introducir una Contrase\xf1a valida "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(32,"div",6),a.Tb(33,"h6"),a.Oc(34,"Informacion personal"),a.Sb(),a.Sb(),a.Tb(35,"div",15),a.Tb(36,"div",16),a.Tb(37,"div",10),a.Tb(38,"label"),a.Oc(39,"Nombre(s)"),a.Sb(),a.Ob(40,"input",17),a.Tb(41,"div",12),a.Oc(42," El nombre es una campo "),a.Tb(43,"strong"),a.Oc(44,"requerido"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(45,"div",16),a.Tb(46,"div",10),a.Tb(47,"label"),a.Oc(48,"Apellido"),a.Sb(),a.Ob(49,"input",18),a.Tb(50,"div",12),a.Oc(51," El apellido es una campo "),a.Tb(52,"strong"),a.Oc(53,"requerido"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(54,"div",15),a.Tb(55,"div",16),a.Tb(56,"div",10),a.Tb(57,"label"),a.Oc(58,"Fecha de nacimiento"),a.Sb(),a.Ob(59,"input",19),a.Tb(60,"div",12),a.Mc(61,w,3,2,"div",20),a.Sb(),a.Sb(),a.Sb(),a.Tb(62,"div",16),a.Tb(63,"div",10),a.Tb(64,"label"),a.Oc(65,"Genero"),a.Sb(),a.Tb(66,"select",21),a.Mc(67,P,2,2,"option",22),a.Sb(),a.Tb(68,"div",12),a.Oc(69," Debe seleccionar un genero "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(70,"div",6),a.Tb(71,"h6"),a.Oc(72,"Informacion de contacto"),a.Sb(),a.Sb(),a.Tb(73,"div",15),a.Tb(74,"div",16),a.Tb(75,"div",10),a.Tb(76,"label"),a.Oc(77,"Numero celular"),a.Sb(),a.Ob(78,"input",23),a.Tb(79,"div",12),a.Oc(80," El numero celular es una campo "),a.Tb(81,"strong"),a.Oc(82,"requerido"),a.Sb(),a.Sb(),a.Mc(83,y,2,1,"div",13),a.Sb(),a.Sb(),a.Tb(84,"div",16),a.Tb(85,"div",10),a.Tb(86,"label"),a.Oc(87,"Correo electronico"),a.Sb(),a.Ob(88,"input",24),a.Tb(89,"div",12),a.Oc(90," El numero celular es una campo "),a.Tb(91,"strong"),a.Oc(92,"requerido"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(93,"div",15),a.Tb(94,"div",25),a.Tb(95,"div",10),a.Tb(96,"label"),a.Oc(97,"Pais"),a.Sb(),a.Tb(98,"select",26,27),a.fc("change",(function(){a.Fc(e);const n=a.Dc(99);return r.filterStates(n.value)})),a.Mc(100,M,2,2,"option",22),a.Sb(),a.Tb(101,"div",12),a.Oc(102," Debe seleccionar un pais "),a.Sb(),a.Sb(),a.Sb(),a.Tb(103,"div",25),a.Tb(104,"div",10),a.Tb(105,"label"),a.Oc(106,"Estado"),a.Sb(),a.Tb(107,"select",28,29),a.fc("change",(function(){a.Fc(e);const n=a.Dc(108);return r.filterCitie(n.value)})),a.Mc(109,A,2,2,"option",22),a.Sb(),a.Tb(110,"div",12),a.Oc(111," Debe seleccionar un estado "),a.Sb(),a.Sb(),a.Sb(),a.Tb(112,"div",25),a.Tb(113,"div",10),a.Tb(114,"label"),a.Oc(115,"Ciudad"),a.Sb(),a.Tb(116,"select",30),a.Mc(117,x,2,2,"option",22),a.Sb(),a.Tb(118,"div",12),a.Oc(119," Debe de seleccionar una ciudad "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(120,"div",31),a.Tb(121,"label"),a.Oc(122,"Direccion"),a.Sb(),a.Ob(123,"input",32),a.Tb(124,"div",12),a.Oc(125," La direccion es una campo "),a.Tb(126,"strong"),a.Oc(127,"requerido"),a.Sb(),a.Sb(),a.Sb(),a.Tb(128,"button",33),a.fc("click",(function(){return r.loading=!0,r.submit()})),a.Mc(129,k,3,0,"div",34),a.Oc(130," Guardar Informacion "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Mc(131,I,1,1,"ng-template",null,35,a.Nc)}if(2&e){const e=a.Dc(132);a.Ab(5),a.qc("formGroup",r.form),a.Ab(9),a.qc("ngIf",!r.imageUrl)("ngIfElse",e),a.Ab(5),a.qc("ngClass",r.form.controls.user_name.invalid?"is-invalid":""),a.Ab(5),a.qc("ngIf",r.responseError),a.Ab(5),a.qc("ngClass",r.form.controls.password.invalid?"is-invalid":""),a.Ab(11),a.qc("ngClass",r.form.controls.first_name.invalid?"is-invalid":""),a.Ab(9),a.qc("ngClass",r.form.controls.last_name.invalid?"is-invalid":""),a.Ab(10),a.qc("ngClass",r.form.controls.birth_date.invalid?"is-invalid":""),a.Ab(2),a.qc("ngIf",r.form.controls.birth_date.errors),a.Ab(5),a.qc("ngClass",r.form.controls.gender.invalid?"is-invalid":""),a.Ab(1),a.qc("ngForOf",r.genders),a.Ab(11),a.qc("ngClass",r.form.controls.phone.invalid?"is-invalid":""),a.Ab(5),a.qc("ngIf",r.responseError),a.Ab(5),a.qc("ngClass",r.form.controls.email.invalid?"is-invalid":""),a.Ab(10),a.qc("ngClass",r.form.controls.countrie.invalid?"is-invalid":""),a.Ab(2),a.qc("ngForOf",r.countries),a.Ab(7),a.qc("ngClass",r.form.controls.state.invalid?"is-invalid":""),a.Ab(2),a.qc("ngForOf",r.states),a.Ab(7),a.qc("ngClass",r.form.controls.citie.invalid?"is-invalid":""),a.Ab(1),a.qc("ngForOf",r.cities),a.Ab(6),a.qc("ngClass",r.form.controls.direction.invalid?"is-invalid":""),a.Ab(5),a.qc("disabled",0==r.form.valid),a.Ab(1),a.qc("ngIf",1==r.loading)}},directives:[o.r,o.k,o.e,t.m,o.a,o.j,o.c,t.k,o.o,t.l,o.m,o.q],styles:[".card[_ngcontent-%COMP%]{width:100%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);border-radius:2em}.card-header[_ngcontent-%COMP%]{background-color:#4d7e7e;color:#fff;border-radius:2em;margin-bottom:2em}.text-center[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.alert[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{border-radius:2em}.errors[_ngcontent-%COMP%]{font-size:80%;color:red}"]}),e})(),j=(()=>{class e{constructor(e){this.router=e,this.stage=0}ngOnInit(){}changeStage(e){!0===e.success&&this.router.navigate(["auth/verify"],{queryParams:{username:e.user_name},queryParamsHandling:"merge"})}}return e.\u0275fac=function(r){return new(r||e)(a.Nb(i.b))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-register"]],decls:2,vars:0,consts:[[1,"container-fluid"],[3,"success"]],template:function(e,r){1&e&&(a.Tb(0,"div",0),a.Tb(1,"app-register-form",1),a.fc("success",(function(e){return r.changeStage(e)})),a.Sb(),a.Sb())},directives:[N],styles:[".card[_ngcontent-%COMP%]{width:100%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);border-radius:2em}.card-header[_ngcontent-%COMP%]{background-color:#4d7e7e;color:#fff;border-radius:2em;margin-bottom:2em}.text-center[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.container[_ngcontent-%COMP%]{padding:2em}.alert[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{border-radius:2em}"]}),e})();var L=n("paZ4");function U(e,r){1&e&&(a.Tb(0,"div",16),a.Oc(1," Por favor, introducir un codigo de verificacion valido "),a.Sb())}function E(e,r){if(1&e&&(a.Tb(0,"div",16),a.Oc(1),a.Sb()),2&e){const e=a.jc(2);a.Ab(1),a.Qc(" ",e.response," ")}}function F(e,r){if(1&e){const e=a.Ub();a.Tb(0,"div",3),a.Tb(1,"div",4),a.Tb(2,"h4",5),a.Oc(3,"Verificacion de usuario"),a.Sb(),a.Sb(),a.Tb(4,"div",6),a.Tb(5,"h3",7),a.Oc(6,"Hemos enviado un codigo de verificacion al numero celular que proporcionaste "),a.Sb(),a.Tb(7,"h5",5),a.Oc(8,"Codigo de verificacion"),a.Sb(),a.Tb(9,"form",8),a.Ob(10,"input",9),a.Tb(11,"div",10),a.Tb(12,"div",11),a.Tb(13,"button",12),a.fc("click",(function(){return a.Fc(e),a.jc().confirm()})),a.Oc(14,"Verificar codigo"),a.Sb(),a.Sb(),a.Tb(15,"div",11),a.Tb(16,"button",13),a.fc("click",(function(){return a.Fc(e),a.jc().resend()})),a.Oc(17,"No tengo el codigo"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Mc(18,U,2,0,"div",14),a.Mc(19,E,2,1,"div",15),a.Sb(),a.Sb()}if(2&e){const e=a.jc();a.Ab(9),a.qc("formGroup",e.form),a.Ab(9),a.qc("ngIf",e.form.controls.confirmation_code.invalid),a.Ab(1),a.qc("ngIf",e.response)}}const $=function(){return["/auth/login"]};function D(e,r){1&e&&(a.Tb(0,"div",3),a.Tb(1,"div",4),a.Tb(2,"h4"),a.Oc(3,"Verificacion de usuario"),a.Sb(),a.Sb(),a.Tb(4,"div",6),a.Tb(5,"h2",5),a.Oc(6,"Verificacion de usuario exitosa"),a.Sb(),a.Tb(7,"div",17),a.Tb(8,"a",18),a.Oc(9," Iniciar sesion "),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.Ab(8),a.qc("routerLink",a.tc(1,$)))}function H(e,r){1&e&&(a.Tb(0,"div",18),a.Oc(1," Por favor, introducir un codigo de seguridad valido "),a.Sb())}function G(e,r){if(1&e&&(a.Tb(0,"div",18),a.Oc(1),a.Sb()),2&e){const e=a.jc(2);a.Ab(1),a.Qc(" ",e.response," ")}}function R(e,r){if(1&e){const e=a.Ub();a.Tb(0,"div",3),a.Tb(1,"div",4),a.Tb(2,"h4",5),a.Oc(3,"Verificacion de usuario"),a.Sb(),a.Sb(),a.Tb(4,"div",6),a.Tb(5,"h3",7),a.Oc(6,"Hemos enviado un codigo de seguridad al numero celular que proporcionaste "),a.Sb(),a.Tb(7,"h5",5),a.Oc(8,"Codigo de seguridad"),a.Sb(),a.Tb(9,"form",8),a.Ob(10,"input",9),a.Tb(11,"div",10),a.Ob(12,"input",11),a.Sb(),a.Tb(13,"div",12),a.Tb(14,"div",13),a.Tb(15,"button",14),a.fc("click",(function(){return a.Fc(e),a.jc().confirm()})),a.Oc(16,"Cambiar password"),a.Sb(),a.Sb(),a.Tb(17,"div",13),a.Tb(18,"button",15),a.fc("click",(function(){return a.Fc(e),a.jc().resend()})),a.Oc(19,"No tengo el codigo"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Mc(20,H,2,0,"div",16),a.Mc(21,G,2,1,"div",17),a.Sb(),a.Sb()}if(2&e){const e=a.jc();a.Ab(9),a.qc("formGroup",e.form),a.Ab(11),a.qc("ngIf",e.form.controls.confirmation_code.invalid),a.Ab(1),a.qc("ngIf",e.response)}}const V=function(){return["/auth/login"]};function z(e,r){1&e&&(a.Tb(0,"div",3),a.Tb(1,"div",4),a.Tb(2,"h4"),a.Oc(3,"Cambio de password"),a.Sb(),a.Sb(),a.Tb(4,"div",6),a.Tb(5,"h2",5),a.Oc(6,"Cambio de password exitosa"),a.Sb(),a.Tb(7,"div",19),a.Tb(8,"a",20),a.Oc(9," Iniciar sesion "),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.Ab(8),a.qc("routerLink",a.tc(1,V)))}const J=[{path:"",children:[{path:"register",component:j},{path:"login",component:g},{path:"verify",component:(()=>{class e{constructor(e,r,n){this.auth=e,this.router=r,this.nutritionist=n,this.success=!1,this.form=new o.d({confirmation_code:new o.b("",[o.p.required,o.p.minLength(4)])})}ngOnInit(){this.router.queryParams.subscribe(e=>{this.username=e.username,console.log(this.username),this.nutritionist.isVerified(this.username).then(e=>{this.success=e.verified}).catch(e=>{console.error(e)})})}confirm(){if(this.form.valid){const e=this.form.value;e.username=this.username,this.auth.verifyUser(e).then(e=>{this.success=!0}).catch(e=>{console.error(e.error.message),this.response=e.error.message})}}resend(){this.auth.resendCode(this.username).then(e=>{this.response=e.message}).catch(e=>{console.error(e)})}}return e.\u0275fac=function(r){return new(r||e)(a.Nb(s.a),a.Nb(i.a),a.Nb(L.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-verification-form"]],decls:4,vars:2,consts:[[1,"container"],["class","card",4,"ngIf","ngIfElse"],["verified",""],[1,"card"],[1,"card-header"],[1,"text-center"],[1,"card-body",2,"padding","1rem"],[2,"text-align","center"],[3,"formGroup"],["maxlength","4","formControlName","confirmation_code"],[1,"row"],[1,"col"],[1,"btn","btn-outline-info","btn-block",3,"click"],[1,"btn","btn-outline-warning","btn-block",3,"click"],["style","margin-top: 1em;","class","alert alert-danger text-center","role","alert",4,"ngIf"],["class","alert alert-danger text-center","style","margin-top: 1em;","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-danger","text-center",2,"margin-top","1em"],["role","alert",1,"alert","alert-info","text-center",2,"margin-top","1em"],["routerLinkActive","router-link-active",1,"button","small","expanded",3,"routerLink"]],template:function(e,r){if(1&e&&(a.Tb(0,"div",0),a.Mc(1,F,20,3,"div",1),a.Sb(),a.Mc(2,D,10,2,"ng-template",null,2,a.Nc)),2&e){const e=a.Dc(3);a.Ab(1),a.qc("ngIf",0==r.success)("ngIfElse",e)}},directives:[t.m,o.r,o.k,o.e,o.a,o.g,o.j,o.c,i.d,i.c],styles:[".card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:50%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);border-radius:2em}.card-header[_ngcontent-%COMP%]{background-color:#4d7e7e;color:#fff;border-radius:2em;margin-bottom:2em}.text-center[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.container[_ngcontent-%COMP%]{padding:2em}.error[_ngcontent-%COMP%]{color:red}.alert[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{border-radius:2em}input[_ngcontent-%COMP%]{display:block;margin:1em auto;border:none;padding:0;width:6ch;background:repeating-linear-gradient(90deg,#696969,#696969 1ch,transparent 0,transparent 1.5ch) 0 100%/5.5ch 2px no-repeat;font:5ch droid sans mono,consolas,monospace;letter-spacing:.5ch}input[_ngcontent-%COMP%]:focus{outline:none;color:#1e90ff}"]}),e})()},{path:"change-password",component:(()=>{class e{constructor(e,r){this.router=e,this.auth=r,this.success=!1,this.form=new o.d({confirmation_code:new o.b("",[o.p.required,o.p.minLength(4)]),password:new o.b("",o.p.required)})}ngOnInit(){this.router.queryParams.subscribe(e=>{this.username=e.username})}confirm(){if(this.form.valid){const e=this.form.value;e.username=this.username,this.auth.changePassword(e.username,e.password,e.confirmation_code).then(e=>{this.success=!0}).catch(e=>{console.error(e.error.message),this.response=e.error.message})}}resend(){this.auth.resendCode(this.username).then(e=>{this.response=e.message}).catch(e=>{console.error(e)})}}return e.\u0275fac=function(r){return new(r||e)(a.Nb(i.a),a.Nb(s.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-change"]],decls:4,vars:2,consts:[[1,"container"],["class","card",4,"ngIf","ngIfElse"],["verified",""],[1,"card"],[1,"card-header"],[1,"text-center"],[1,"card-body",2,"padding","1rem"],[2,"text-align","center"],[3,"formGroup"],["maxlength","4","formControlName","confirmation_code",1,"code"],[1,"d-flex","justify-content-center","mb-3"],["type","password","placeholder","Nuevo password","maxlength","12","formControlName","password"],[1,"row"],[1,"col"],[1,"btn","btn-outline-info","btn-block",3,"click"],[1,"btn","btn-outline-warning","btn-block",3,"click"],["style","margin-top: 1em;","class","alert alert-danger text-center","role","alert",4,"ngIf"],["class","alert alert-danger text-center","style","margin-top: 1em;","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-danger","text-center",2,"margin-top","1em"],["role","alert",1,"alert","alert-info","text-center",2,"margin-top","1em"],["routerLinkActive","router-link-active",1,"button","small","expanded",3,"routerLink"]],template:function(e,r){if(1&e&&(a.Tb(0,"div",0),a.Mc(1,R,22,3,"div",1),a.Sb(),a.Mc(2,z,10,2,"ng-template",null,2,a.Nc)),2&e){const e=a.Dc(3);a.Ab(1),a.qc("ngIf",0==r.success)("ngIfElse",e)}},directives:[t.m,o.r,o.k,o.e,o.a,o.g,o.j,o.c,i.d,i.c],styles:[".card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:50%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);border-radius:2em}.card-header[_ngcontent-%COMP%]{background-color:#4d7e7e;color:#fff;border-radius:2em;margin-bottom:2em}.text-center[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.container[_ngcontent-%COMP%]{padding:2em}.error[_ngcontent-%COMP%]{color:red}.alert[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{border-radius:2em}input.code[_ngcontent-%COMP%]{display:block;margin:1em auto;border:none;padding:0;width:6ch;background:repeating-linear-gradient(90deg,#696969,#696969 1ch,transparent 0,transparent 1.5ch) 0 100%/5.5ch 2px no-repeat;font:5ch droid sans mono,consolas,monospace;letter-spacing:.5ch}input.code[_ngcontent-%COMP%]:focus{outline:none;color:#1e90ff}"]}),e})()}]}];let K=(()=>{class e{}return e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({factory:function(r){return new(r||e)},imports:[[i.e.forChild(J)],i.e]}),e})(),Q=(()=>{class e{}return e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({factory:function(r){return new(r||e)},imports:[[t.c,K,o.n,o.f]]}),e})()},paZ4:function(e,r,n){"use strict";n.d(r,"a",(function(){return a}));var t=n("tk/3"),o=n("AytR"),i=n("fXoL");let a=(()=>{class e{constructor(e){this.http=e}getNutritionistProfile(e){return new Promise((r,n)=>{this.http.get(`${o.a.baseUrl}/v1/nutritionist/get-nutritionist-profile/${e}`).subscribe(e=>r(e),e=>n(e))})}getStatistics(e){return new Promise((r,n)=>{this.http.get(`${o.a.baseUrl}/v1/nutritionist/get-statistics/${e}`).subscribe(e=>r(e),e=>n(e))})}getConsultations(e){return new Promise((r,n)=>{let i=new t.d;i=i.append("start",e.start),i=i.append("end",e.end),i=i.append("nutritionist",e.nutritionist),i=i.append("atended",e.atended),this.http.get(`${o.a.baseUrl}/v1/schedule/filter-by-range`,{params:i}).subscribe(e=>r(e),e=>n(e))})}getPatients(e,r){let n=new t.d;return n=n.append("pagination",e.pagination),n=n.append("hasParams",e.params),!0===e.pagination&&(n=n.append("size",e.size),n=n.append("page",e.page)),!0===e.params&&(n=n.append("gender",e.gender),n=n.append("phone",e.phone),n=n.append("username",e.username),n=n.append("email",e.email)),new Promise((e,t)=>{this.http.get(`${o.a.baseUrl}/v1/nutritionist/patients/${r}`,{params:n}).subscribe(r=>e(r),e=>t(e))})}isVerified(e){return new Promise((r,n)=>{this.http.get(`${o.a.baseUrl}/v1/users/is-verified/${e}`).subscribe(e=>r(e),e=>n(e))})}toBase64(e){return btoa(String.fromCharCode.apply(null,new Uint8Array(e.data)))}putNutritionist(e){return new Promise((r,n)=>{this.http.post(`${o.a.baseUrl}/v1/users/update-nutritionist-profile/`,e).subscribe(e=>r(e),e=>n(e))})}registerPatient(e){return new Promise((r,n)=>{this.http.post(`${o.a.baseUrl}/v1/patient/register-patient`,e).subscribe(e=>r(e),e=>n(e))})}scheduleConsultation(e){return new Promise((r,n)=>{this.http.post(`${o.a.baseUrl}/v1/schedule/new-date`,e).subscribe(e=>r(e),e=>n(e))})}putPatient(e){return new Promise((r,n)=>{this.http.post(`${o.a.baseUrl}/v1/patient/update-patient`,e).subscribe(e=>r(e),e=>n(e))})}putConsultation(e){return new Promise((r,n)=>{this.http.post(`${o.a.baseUrl}/v1/schedule/put-date`,e).subscribe(e=>r(e),e=>n(e))})}}return e.\u0275fac=function(r){return new(r||e)(i.bc(t.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);