function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{rZ7t:function(e,t,n){"use strict";n.r(t),n.d(t,"PatientsModule",(function(){return U}));var a,i=n("ofXK"),r=n("2Yyj"),c=n.n(r),o=n("9WrV"),s=n("tyNb"),l=n("fXoL"),u=n("M34a"),d=n("piIK"),v=n("9ig3"),b=n("jKzE"),f=n("WIjQ"),h=n("G6Tw"),w=n("XNiG"),p=n("kRoH"),y=n("1kSV"),m=n("paZ4"),C=n("tk/3"),D=n("AytR"),k=((a=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"getConsultations",value:function(e){var t=this;return new Promise((function(n,a){var i=new C.d;i=(i=(i=(i=i.append("start",e.start)).append("end",e.end)).append("nutritionist",e.patient)).append("atended",e.atended),t.http.get("".concat(D.a.baseUrl,"/v1/patient/consultations/").concat(e.patient),{params:i}).subscribe((function(e){return n(e)}),(function(e){return a(e)}))}))}}]),e}()).\u0275fac=function(e){return new(e||a)(l.bc(C.b))},a.\u0275prov=l.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),T=n("Dhqu"),g=["modalContent"];function S(e,t){if(1&e){var n=l.Ub();l.Tb(0,"mwl-calendar-month-view",11),l.fc("dayClicked",(function(e){return l.Fc(n),l.jc().dayClicked(e.day)}))("eventClicked",(function(e){return l.Fc(n),l.jc().handleEvent("update",e.event)}))("eventTimesChanged",(function(e){return l.Fc(n),l.jc().eventTimesChanged(e)})),l.Sb()}if(2&e){var a=l.jc();l.qc("locale",a.locale)("viewDate",a.viewDate)("events",a.events)("refresh",a.refresh)("activeDayIsOpen",a.activeDayIsOpen)}}function O(e,t){if(1&e){var n=l.Ub();l.Tb(0,"mwl-calendar-week-view",12),l.fc("eventClicked",(function(e){return l.Fc(n),l.jc().handleEvent("update",e.event)}))("eventTimesChanged",(function(e){return l.Fc(n),l.jc().eventTimesChanged(e)})),l.Sb()}if(2&e){var a=l.jc();l.qc("locale",a.locale)("viewDate",a.viewDate)("events",a.events)("refresh",a.refresh)}}function A(e,t){if(1&e){var n=l.Ub();l.Tb(0,"mwl-calendar-day-view",12),l.fc("eventClicked",(function(e){return l.Fc(n),l.jc().handleEvent("update",e.event)}))("eventTimesChanged",(function(e){return l.Fc(n),l.jc().eventTimesChanged(e)})),l.Sb()}if(2&e){var a=l.jc();l.qc("locale",a.locale)("viewDate",a.viewDate)("events",a.events)("refresh",a.refresh)}}function j(e,t){1&e&&(l.Tb(0,"h5",23),l.Oc(1,"Datos de una consulta"),l.Sb())}function _(e,t){if(1&e&&(l.Tb(0,"div",13),l.Mc(1,j,2,0,"h5",14),l.Tb(2,"button",15),l.fc("click",(function(){return(0,t.close)()})),l.Tb(3,"span",16),l.Oc(4,"\xd7"),l.Sb(),l.Sb(),l.Sb(),l.Tb(5,"div",17),l.Tb(6,"div"),l.Tb(7,"div",18),l.Tb(8,"div",19),l.Tb(9,"p",20),l.Oc(10),l.Sb(),l.Sb(),l.Tb(11,"div",19),l.Tb(12,"p",20),l.Oc(13),l.Sb(),l.Sb(),l.Sb(),l.Tb(14,"p",20),l.Oc(15),l.kc(16,"dateFormater"),l.Sb(),l.Sb(),l.Sb(),l.Tb(17,"div",21),l.Tb(18,"button",22),l.fc("click",(function(){return(0,t.close)()})),l.Oc(19," OK "),l.Sb(),l.Sb()),2&e){var n=l.jc();l.Ab(1),l.qc("ngIf","update"===n.modalData.action),l.Ab(9),l.Qc("Atiende: ",(null==n.modalData?null:n.modalData.event.nutritionist_id.first_name)+" "+(null==n.modalData?null:n.modalData.event.nutritionist_id.first_name)," "),l.Ab(3),l.Qc("Telefono de contacto: ",null==n.modalData?null:n.modalData.event.nutritionist_id.phone," "),l.Ab(2),l.Qc("Fecha: ",l.lc(16,4,null==n.modalData?null:n.modalData.event.start)," ")}}var E,I,V,F={red:{primary:"#ad2121",secondary:"#FAE3E3"},blue:{primary:"#1e90ff",secondary:"#D1E8FF"},yellow:{primary:"#e3bc08",secondary:"#FDF1BA"}},M=((E=function(){function e(t,n,a,i){var r=this;_classCallCheck(this,e),this.modal=t,this.nutritionist=n,this.patient=a,this.router=i,this.locale="es",this.newEvent={title:"",start:Object(u.a)(new Date),end:Object(d.a)(new Date),color:F.blue,draggable:!0,resizable:{beforeStart:!0,afterEnd:!0},duration:"",nutritionist:""},this.view=p.d.Month,this.CalendarView=p.d,this.viewDate=new Date,this.actions=[{label:'<i class="fas fa-fw fa-pencil-alt"></i>',a11yLabel:"Edit",onClick:function(e){var t=e.event;r.handleEvent("Edited",t)}},{label:'<i class="fas fa-fw fa-trash-alt"></i>',a11yLabel:"Delete",onClick:function(e){var t=e.event;r.events=r.events.filter((function(e){return e!==t})),r.handleEvent("Deleted",t)}}],this.refresh=new w.a,this.events=[],this.activeDayIsOpen=!0,this.params={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.router.queryParams.subscribe((function(t){e.username=t.username,e.newEvent.nutritionist=e.username,e.params.patient=e.username,e.params.start=Object(v.a)(new Date),e.params.end=Object(b.a)(new Date),e.params.atended=!1,e.retriveConsultations()}))}},{key:"retriveConsultations",value:function(){var e=this;this.patient.getConsultations(this.params).then((function(t){t.forEach((function(e){e.end=new Date(e.end),e.start=new Date(e.start)})),e.events=t})).catch((function(e){console.error(e)}))}},{key:"dayClicked",value:function(e){var t=e.date,n=e.events;Object(f.a)(t,this.viewDate)&&(this.activeDayIsOpen=!(Object(h.a)(this.viewDate,t)&&!0===this.activeDayIsOpen||0===n.length),this.viewDate=t)}},{key:"eventTimesChanged",value:function(e){var t=e.event,n=e.newStart,a=e.newEnd;this.events=this.events.map((function(e){return e===t?Object.assign(Object.assign({},t),{start:n,end:a}):e})),this.handleEvent("Dropped or resized",t)}},{key:"handleEvent",value:function(e,t){this.modalData={event:t,action:e},this.modal.open(this.modalContent,{size:"lg"})}},{key:"addEvent",value:function(){this.events=[].concat(_toConsumableArray(this.events),[{title:"New event",start:Object(u.a)(new Date),end:Object(d.a)(new Date),color:F.red,draggable:!0,resizable:{beforeStart:!0,afterEnd:!0}}])}},{key:"deleteEvent",value:function(e){this.events=this.events.filter((function(t){return t!==e}))}},{key:"setView",value:function(e){this.view=e}},{key:"closeOpenMonthViewDay",value:function(){this.activeDayIsOpen=!1}},{key:"closeFun",value:function(e){!0===e&&(this.modal.dismissAll(),this.retriveConsultations())}}]),e}()).\u0275fac=function(e){return new(e||E)(l.Nb(y.a),l.Nb(m.a),l.Nb(k),l.Nb(s.a))},E.\u0275cmp=l.Hb({type:E,selectors:[["app-calendar"]],viewQuery:function(e,t){var n;1&e&&l.Kc(g,!0),2&e&&l.Cc(n=l.gc())&&(t.modalContent=n.first)},decls:28,vars:20,consts:[[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn","btn-primary",3,"click"],[1,"mb-3","mt-3",2,"width","100%",3,"ngSwitch"],[3,"locale","viewDate","events","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged",4,"ngSwitchCase"],[3,"locale","viewDate","events","refresh","eventClicked","eventTimesChanged",4,"ngSwitchCase"],["modalContent",""],[3,"locale","viewDate","events","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged"],[3,"locale","viewDate","events","refresh","eventClicked","eventTimesChanged"],[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col"],[1,"font-weight-normal"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"modal-title"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"div",1),l.Tb(2,"div",2),l.Tb(3,"div",3),l.fc("viewDateChange",(function(e){return t.viewDate=e}))("viewDateChange",(function(){return t.closeOpenMonthViewDay()})),l.Oc(4," Anterior "),l.Sb(),l.Tb(5,"div",4),l.fc("viewDateChange",(function(e){return t.viewDate=e})),l.Oc(6," Hoy "),l.Sb(),l.Tb(7,"div",5),l.fc("viewDateChange",(function(e){return t.viewDate=e}))("viewDateChange",(function(){return t.closeOpenMonthViewDay()})),l.Oc(8," Siguiente "),l.Sb(),l.Sb(),l.Sb(),l.Tb(9,"div",1),l.Tb(10,"h3"),l.Oc(11),l.kc(12,"calendarDate"),l.Sb(),l.Sb(),l.Tb(13,"div",1),l.Tb(14,"div",2),l.Tb(15,"div",6),l.fc("click",(function(){return t.setView(t.CalendarView.Month)})),l.Oc(16," Mes "),l.Sb(),l.Tb(17,"div",6),l.fc("click",(function(){return t.setView(t.CalendarView.Week)})),l.Oc(18," Semana "),l.Sb(),l.Tb(19,"div",6),l.fc("click",(function(){return t.setView(t.CalendarView.Day)})),l.Oc(20," Dia "),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Ob(21,"br"),l.Tb(22,"div",7),l.Mc(23,S,1,5,"mwl-calendar-month-view",8),l.Mc(24,O,1,4,"mwl-calendar-week-view",9),l.Mc(25,A,1,4,"mwl-calendar-day-view",9),l.Sb(),l.Mc(26,_,20,6,"ng-template",null,10,l.Nc)),2&e&&(l.Ab(3),l.qc("view",t.view)("viewDate",t.viewDate),l.Ab(2),l.qc("viewDate",t.viewDate),l.Ab(2),l.qc("view",t.view)("viewDate",t.viewDate),l.Ab(4),l.Pc(l.nc(12,16,t.viewDate,t.view+"ViewTitle","es")),l.Ab(4),l.Fb("active",t.view===t.CalendarView.Month),l.Ab(2),l.Fb("active",t.view===t.CalendarView.Week),l.Ab(2),l.Fb("active",t.view===t.CalendarView.Day),l.Ab(3),l.qc("ngSwitch",t.view),l.Ab(1),l.qc("ngSwitchCase",t.CalendarView.Month),l.Ab(1),l.qc("ngSwitchCase",t.CalendarView.Week),l.Ab(1),l.qc("ngSwitchCase",t.CalendarView.Day))},directives:[p.g,p.i,p.h,i.o,i.p,p.c,p.e,p.a,i.m],pipes:[p.j,T.a],styles:[""]}),E),q=[{path:"",children:[{path:"home",component:(I=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),I.\u0275fac=function(e){return new(e||I)},I.\u0275cmp=l.Hb({type:I,selectors:[["app-shcedule"]],decls:2,vars:0,consts:[[1,"container-fluid"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Ob(1,"app-calendar"),l.Sb())},directives:[M],styles:[""]}),I)}]}],L=((V=function e(){_classCallCheck(this,e)}).\u0275mod=l.Lb({type:V}),V.\u0275inj=l.Kb({factory:function(e){return new(e||V)},imports:[[s.e.forChild(q)],s.e]}),V),N=n("UBqL"),P=n("1BeU");Object(i.B)(c.a);var K,U=((K=function e(){_classCallCheck(this,e)}).\u0275mod=l.Lb({type:K}),K.\u0275inj=l.Kb({factory:function(e){return new(e||K)},imports:[[i.c,L,N.a.forRoot(),p.b.forRoot({provide:p.f,useFactory:P.adapterFactory}),y.b,o.a]]}),K)}}]);